<%# -*- encoding : utf-8 -*- %>
<!DOCTYPE html>
<html>
    <%= erb :head, :locals => {:current_feed_id => current_feed_id} %>

    <body>
        <% if ! isAdmin? %>
            <main id="login">
                <img src="<%= url_for '/mstile-144x144.png' %>" id="logo">
                <div>
                    <h1>Login</h1>
                    <%= render_login_button %>
                </div>
        </main>
        <% else %>
            <%= erb :feedlist, :locals => {:feeds => feeds, :current_feed_id => current_feed_id} %>

            <% if entries %>
                <main id="entries" data-feedid="<%= current_feed_id %>">
                    <form id="readall" method="POST" action="<%= url_for '/readall' %>">
                        <% entries.each do |entry| %>
                            <input type="hidden" name="ids[]" value="<%= entry.id %>" />
                        <% end %>
                        <button type="submit" title="Mark all as read">&#10003;</button>
                    </form>
                    <ol id="entryList">
                    <% entries.each do |entry| %>
                        <%= erb :entry, :locals => {:entry => entry} %>
                    <% end %>
                    </ol>
                </main>
            <% end %>
            <% if showSettings %>
                <main id="entries">
                    <%= erb :addForm %>
                    <%= erb :unsubscribeForm, :locals => {:feeds => feeds} %>
                </main>
            <% end %>
        <% end %>  
    </body>
</html>
